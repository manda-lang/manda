import Net
import Text

let server = Net.Socket.server()

do {
  try server.bind('127.0.0.1', 3000)
  
  while (True) {
    let sock = server.accept()
    print('FD: %{sock.fileDescriptor}')
    
    let printer = Text.Printer(sock)
    printer.line('Hello, Manda world!!!')
    
    sock.close()
  }
} catch(error) {
  print('Whoops: %error')
} finally {
  server.close()
}